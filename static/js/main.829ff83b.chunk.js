(this["webpackJsonpgoit-react-hw-07"]=this["webpackJsonpgoit-react-hw-07"]||[]).push([[3],{17:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=function(e){return e.auth.isLoggedIn},c=function(e){return e.auth.user.email},u=function(e){return e.auth.user.name}},23:function(e,t,n){"use strict";var r=n(19),c=n.n(r),u=n(4);c.a.defaults.baseURL="https://connections-api.herokuapp.com";var a=function(e){c.a.defaults.headers.common.Authorization="Bearer ".concat(e)},o=function(){c.a.defaults.headers.common.Authorization=""};t.a={register:function(e){return function(t){t(u.a.registerRequest()),c.a.post("/users/signup",e).then((function(e){a(e.data.token),t(u.a.registerSuccess(e.data))})).catch((function(e){return t(u.a.registerError(e.message))}))}},login:function(e){return function(t){t(u.a.loginRequest()),c.a.post("/users/login",e).then((function(e){a(e.data.token),t(u.a.loginSuccess(e.data))})).catch((function(e){return t(u.a.loginError(e.message))}))}},logout:function(){return function(e){e(u.a.logoutRequest()),c.a.post("/users/logout").then((function(){o(),e(u.a.logoutSuccess())})).catch((function(t){return e(u.a.logoutError(t.message))}))}},getCurrentUser:function(){return function(e,t){var n=t().auth.token;n&&(a(n),e(u.a.getCurrentUserRequest),c.a.get("/users/current").then((function(t){return e(u.a.getCurrentUserSuccess(t.data))})).catch((function(t){return e(u.a.getCurrentUserError(t.message))})))}}}},27:function(e,t,n){e.exports={userMenu:"UserMenu_userMenu__Z3cMh",userEmail:"UserMenu_userEmail__1mYwE"}},28:function(e,t,n){e.exports={link:"Navigation_link__3V2Ru",activeLink:"Navigation_activeLink__1Post Navigation_link__3V2Ru"}},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),c=Object(r.b)("changeFilter")},4:function(e,t,n){"use strict";var r=n(2),c=Object(r.b)("auth/registerRequest"),u=Object(r.b)("auth/registerSuccess"),a=Object(r.b)("auth/registerError"),o=Object(r.b)("auth/loginRequest"),i=Object(r.b)("auth/loginSuccess"),s=Object(r.b)("auth/loginError"),b=Object(r.b)("auth/logoutRequest"),j=Object(r.b)("auth/logoutSuccess"),l=Object(r.b)("auth/logoutError"),O=Object(r.b)("auth/getCurrentUserRequest"),f=Object(r.b)("auth/getCurrentUserSuccess"),d=Object(r.b)("auth/getCurrentUserError");t.a={registerRequest:c,registerSuccess:u,registerError:a,loginRequest:o,loginSuccess:i,loginError:s,logoutRequest:b,logoutSuccess:j,logoutError:l,getCurrentUserRequest:O,getCurrentUserSuccess:f,getCurrentUserError:d}},49:function(e,t,n){e.exports={userMenu:"AuthMenu_userMenu__3rNk7",userEmail:"AuthMenu_userEmail__26JIg",link:"AuthMenu_link__OrbJZ",activeLink:"AuthMenu_activeLink__3AM2M"}},50:function(e,t,n){e.exports={header:"NavHeader_header__2u8SZ"}},86:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var r,c,u,a,o,i,s,b=n(0),j=n.n(b),l=n(24),O=n.n(l),f=n(14),d=n(10),g=n(47),h=n(26),m=n(7),p=n(2),v=n(18),x=n(3),E=n(9),y=Object(p.c)([],(r={},Object(x.a)(r,E.i,(function(e,t){return t.payload})),Object(x.a)(r,E.c,(function(e,t){var n=t.payload;return[].concat(Object(h.a)(e),[{name:n.name,number:n.number,id:n.id}])})),Object(x.a)(r,E.f,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),r)),k=Object(p.c)("",(c={},Object(x.a)(c,E.g,(function(e,t){var n=t.payload;return alert("Error : ".concat(n)),n})),Object(x.a)(c,E.a,(function(e,t){var n=t.payload;return alert("Error : ".concat(n)),n})),Object(x.a)(c,E.d,(function(e,t){var n=t.payload;return alert("Error : ".concat(n)),n})),c)),S=Object(p.c)(!1,(u={},Object(x.a)(u,E.h,(function(){return!0})),Object(x.a)(u,E.i,(function(){return!1})),Object(x.a)(u,E.b,(function(){return!0})),Object(x.a)(u,E.c,(function(){return!1})),Object(x.a)(u,E.a,(function(){return!1})),Object(x.a)(u,E.e,(function(){return!0})),Object(x.a)(u,E.f,(function(){return!1})),Object(x.a)(u,E.d,(function(){return!1})),u)),_=Object(m.b)({entries:y,loading:S,error:k}),C=n(37),N=Object(p.c)("",Object(x.a)({},C.a,(function(e,t){return t.payload}))),U=n(4),A={name:null,email:null},L=Object(p.c)(A,(a={},Object(x.a)(a,U.a.registerSuccess,(function(e,t){return t.payload.user})),Object(x.a)(a,U.a.loginSuccess,(function(e,t){return t.payload.user})),Object(x.a)(a,U.a.logoutSuccess,(function(){return A})),Object(x.a)(a,U.a.getCurrentUserSuccess,(function(e,t){return t.payload})),a)),R=Object(p.c)(null,(o={},Object(x.a)(o,U.a.registerSuccess,(function(e,t){return t.payload.token})),Object(x.a)(o,U.a.loginSuccess,(function(e,t){return t.payload.token})),Object(x.a)(o,U.a.logoutSuccess,(function(){return null})),o)),M=Object(p.c)(null,(i={},Object(x.a)(i,U.a.registerError,(function(e,t){return t.payload})),Object(x.a)(i,U.a.loginError,(function(e,t){return t.payload})),Object(x.a)(i,U.a.logoutError,(function(e,t){return t.payload})),Object(x.a)(i,U.a.getCurrentUserError,(function(e,t){return t.payload})),i)),q=Object(p.c)(!1,(s={},Object(x.a)(s,U.a.registerSuccess,(function(){return!0})),Object(x.a)(s,U.a.loginSuccess,(function(){return!0})),Object(x.a)(s,U.a.getCurrentUserSuccess,(function(){return!0})),Object(x.a)(s,U.a.logoutSuccess,(function(){return!1})),Object(x.a)(s,U.a.registerError,(function(){return!1})),Object(x.a)(s,U.a.loginError,(function(){return!1})),Object(x.a)(s,U.a.getCurrentUserError,(function(){return!1})),s)),z=Object(m.b)({user:L,token:R,isLoggedIn:q,error:M}),T=n(48),w=n.n(T),I=Object(h.a)(Object(p.d)({serializableCheck:{ignoredActions:[v.a,v.f,v.b,v.c,v.d,v.e]}})),J={key:"auth",storage:w.a,whitelist:["token"]},B=Object(m.b)({items:_,filter:N}),F=Object(m.b)({auth:Object(v.g)(J,z),contacts:B}),Z=Object(p.a)({reducer:F},I),G={store:Z,persistor:Object(v.h)(Z)},H=n(33),P=n(34),V=n(36),D=n(35),Y=n(6),K=n(27),Q=n.n(K),W=n(23),X=n(1),$=Object(d.b)(null,(function(e){return{onLogout:function(){return e(W.a.logout())}}}))((function(e){var t=e.email,n=e.onLogout;return Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)("div",{className:Q.a.userMenu,children:[Object(X.jsx)("span",{className:Q.a.userEmail,children:t}),Object(X.jsx)("button",{className:Q.a.logoutBtn,type:"button",onClick:n,children:"Log out"})]})})})),ee=n(49),te=n.n(ee),ne=function(){return Object(X.jsxs)("div",{className:te.a.userNav,children:[Object(X.jsx)(f.b,{className:"navLink",activeClassName:"activeNavLink",exact:!0,to:"/login",children:"Log in"}),Object(X.jsx)(f.b,{className:"navLink",activeClassName:"activeNavLink",exact:!0,to:"/register",children:"Sign up"})]})},re=n(17),ce=n(28),ue=n.n(ce),ae=Object(d.b)((function(e){return{isAuthentificated:Object(re.c)(e)}}))((function(e){var t=e.isAuthentificated;return Object(X.jsxs)("nav",{className:ue.a.nav,children:[Object(X.jsx)(f.b,{to:"/",exact:!0,className:ue.a.link,activeClassName:"activeNavLink",children:"Home"}),t&&Object(X.jsx)(f.b,{to:"/contacts",exact:!0,className:ue.a.link,activeClassName:"activeNavLink",children:"Contacts"})]})})),oe=n(50),ie=n.n(oe),se=Object(d.b)((function(e){return{isAuthentificated:Object(re.c)(e),currentUserEmail:Object(re.a)(e)}}))((function(e){var t=e.isAuthentificated,n=e.currentUserEmail;return Object(X.jsxs)("header",{className:ie.a.header,children:[Object(X.jsx)(ae,{}),t?Object(X.jsx)($,{email:n}):Object(X.jsx)(ne,{})]})})),be=n(16),je=n(25),le=["component","isAuthentificated","redirectTo"],Oe=Object(d.b)((function(e){return{isAuthentificated:Object(re.c)(e)}}))((function(e){var t=e.component,n=e.isAuthentificated,r=e.redirectTo,c=Object(je.a)(e,le);return Object(X.jsx)(Y.b,Object(be.a)(Object(be.a)({},c),{},{render:function(e){return n?Object(X.jsx)(t,Object(be.a)({},e)):Object(X.jsx)(Y.a,{to:r})}}))})),fe=["component","isAuthentificated","redirectTo"],de=Object(d.b)((function(e){return{isAuthentificated:Object(re.c)(e)}}))((function(e){var t=e.component,n=e.isAuthentificated,r=e.redirectTo,c=Object(je.a)(e,fe);return Object(X.jsx)(Y.b,Object(be.a)(Object(be.a)({},c),{},{render:function(e){return n&&c.restricted?Object(X.jsx)(Y.a,{to:r}):Object(X.jsx)(t,Object(be.a)({},e))}}))})),ge={home:"/",register:"/register",login:"/login",contacts:"/contacts"},he=Object(b.lazy)((function(){return n.e(1).then(n.bind(null,112))})),me=Object(b.lazy)((function(){return n.e(2).then(n.bind(null,113))})),pe=Object(b.lazy)((function(){return n.e(5).then(n.bind(null,114))})),ve=Object(b.lazy)((function(){return n.e(0).then(n.bind(null,109))})),xe=Object(b.lazy)((function(){return Promise.all([n.e(8),n.e(4)]).then(n.bind(null,110))})),Ee=function(e){Object(V.a)(n,e);var t=Object(D.a)(n);function n(){return Object(H.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(se,{}),Object(X.jsx)(b.Suspense,{fallback:Object(X.jsx)("p",{children:"Loading..."}),children:Object(X.jsxs)(Y.d,{children:[Object(X.jsx)(de,{path:ge.login,component:me,redirectTo:ge.contacts,restricted:!0}),Object(X.jsx)(de,{path:ge.register,component:pe,redirectTo:ge.contacts,restricted:!0}),Object(X.jsx)(Oe,{path:ge.contacts,component:ve,redirectTo:ge.login}),Object(X.jsx)(de,{path:ge.home,component:xe,redirectTo:ge.login}),Object(X.jsx)(Y.b,{component:he})]})})]})}}]),n}(b.Component),ye={onGetCurrentUser:W.a.getCurrentUser},ke=Object(d.b)(null,ye)(Ee);n(85),n(86);O.a.render(Object(X.jsx)(j.a.StrictMode,{children:Object(X.jsx)(d.a,{store:G.store,children:Object(X.jsx)(g.a,{loading:null,persistor:G.persistor,children:Object(X.jsx)(f.a,{children:Object(X.jsx)(ke,{})})})})}),document.getElementById("root"))},9:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return j})),n.d(t,"g",(function(){return l}));var r=n(2),c=Object(r.b)("entry/addEntryRequest"),u=Object(r.b)("entry/addEntrySuccess"),a=Object(r.b)("entry/addEntryError"),o=Object(r.b)("entry/deleteEntryRequest"),i=Object(r.b)("entry/deleteEntrySuccess"),s=Object(r.b)("entry/deleteEntryError"),b=Object(r.b)("entry/fetchEntriesRequest"),j=Object(r.b)("entry/fetchEntriesSuccess"),l=Object(r.b)("entry/fetchEntriesError")}},[[87,6,7]]]);
//# sourceMappingURL=main.829ff83b.chunk.js.map